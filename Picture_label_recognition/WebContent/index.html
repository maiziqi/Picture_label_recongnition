<!DOCTYPE html>
<html>
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
		<meta charset="UTF-8">
		<title>sto_PLR_orz</title>
	</head>
	<body id="body">
		<p>Example:D:/tmp/mycifar10_data/Train/tiger/full/1.jpg</p></br>
		输入图片路径：<input type="text" id="input" value="D:/tmp/mycifar10_data/Train/tiger/full/1.jpg" size="70"/></br>
		<!--  <button type="button" onclick="button_getlabel()">Getlabel!</button> -->
		<button type="button" onclick="button_getphoto()">Getphoto!</button>
		
		<form id="photo_form" action="/" method="post" entype="multipart/form-data">		<!-- <form>标签要添加enctype="multipart/form-data"属性。 -->
			chose the photo：<input id="photo_id" type="file" name="photo_name">
			<button id="photo_button_id" type="button" onclick="button_uploadphoto()" >Upload</button>
		</form>
		
	</body>
	<script>
		var photo_path="D:/tmp/mycifar10_data/Train/tiger/full/1.jpg"
		function button_getlabel(){
			//alert("fuck you!"); 
			var photo_path=$("#input").val()
			$.ajax({
				url:"http://localhost:8080/PLR/plr_getlabel.plr",
				dataType:"json",
				async: false,
				data:{photopath:photo_path},
				success:function(result){
					alert(result.labelname);
				},
				error:function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status+" "+XMLHttpRequest.readyState);
                }
			});
		}
		function button_getphoto(){
			//alert("ffffuuuucccckkkk    yyyyoooouuuu!!!!");
			$.ajax({
				url:"http://localhost:8080/PLR/plr_getphoto.plr",
				dataType:"json",
				async: false,
				data:{labelname:"book",photonum:10},
				success:function(result){
					if(result.isexist==0){
						alert("error:label not exist")
					}
					else{
						alert(result.labelpath);
						for(var i=0;i<10;i++){
							$("#body").append(result.photolist[i]+"</br>");
						}
					}
				},
				error:function(XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status+" "+XMLHttpRequest.readyState);
                }
			});
		}
		function button_uploadphoto(){
			//alert("fuckkkkk")
			$.ajax({  
				url:"http://localhost:8080/PLR/plr_uploadphoto.plr",  
				type:'POST',  
				cache:false,  			<!-- cache设置为false，上传文件不需要缓存。-->
				data:new FormData($("#photo_form")[0]),  
				processData:false,  	<!-- processData设置为false。因为data值是FormData对象，不需要对数据做处理。 -->
				contentType:false,  	<!-- contentType设置为false。因为是由<form>表单构造的FormData对象，且已经声明了属性enctype="multipart/form-data"，所以这里设置为false。 -->
				dataType:"json",
				success:function (result) {
			    	if(result.upload_success)alert("upload Success");
			    	else alert("upload Fail");
				},  
				error:function(XMLHttpRequest, textStatus, errorThrown) {
					alert(XMLHttpRequest.status+" "+XMLHttpRequest.readyState);
				}  
			});  
		}
	</script>
</html>